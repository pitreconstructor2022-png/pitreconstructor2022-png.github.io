<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de control - Pitre el Constructor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f3f3f3;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #14213d;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 22px;
    }

    nav {
      background-color: #fca311;
      display: flex;
      justify-content: center;
      padding: 10px;
      gap: 15px;
      flex-wrap: wrap;
    }

    nav button {
      background-color: #14213d;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }

    nav button:hover {
      background-color: #0f1b30;
    }

    main {
      text-align: center;
      margin-top: 30px;
      padding: 20px;
    }

    .card {
      background-color: white;
      max-width: 700px;
      margin: 20px auto;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }

    label {
      display: block;
      text-align: left;
      margin-top: 10px;
      font-weight: bold;
    }

    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button.submit {
      margin-top: 15px;
      background-color: #fca311;
      color: #14213d;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }

    button.submit:hover {
      background-color: #e59500;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
    }

    th {
      background-color: #14213d;
      color: white;
    }

    footer {
      margin-top: 40px;
      text-align: center;
      color: gray;
      font-size: 14px;
    }

    .edit-btn {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
    }

    .edit-btn:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <header>Panel de control - Pitre el Constructor üë∑‚Äç‚ôÇÔ∏è</header>

  <nav>
    <button onclick="mostrar('alquileres')">Alquileres</button>
    <button onclick="mostrar('precios')">Precios</button>
    <button onclick="mostrar('ventas')">Ventas</button>
    <button onclick="window.location.href='index.html'">Cerrar sesi√≥n</button>
  </nav>

  <main id="contenido">
    <h2>Bienvenido al panel</h2>
    <p>Selecciona una opci√≥n del men√∫ para comenzar.</p>
  </main>

  <footer>¬© 2025 Pitre el Constructor</footer>

  <script>
    // ----------- FUNCIONES PRINCIPALES -----------
    function mostrar(seccion) {
      if (seccion === 'alquileres') mostrarAlquileres();
      if (seccion === 'precios') mostrarPrecios();
      if (seccion === 'ventas') mostrarVentas();
    }

    // ----------- ALQUILERES -----------
    function mostrarAlquileres() {
      const contenido = document.getElementById('contenido');
      contenido.innerHTML = `
        <div class="card">
          <h3>Registro de Alquileres</h3>
          <form id="formAlquiler">
            <label>Nombre del cliente</label>
            <input type="text" id="cliente" required>
            <label>Documento del cliente</label>
            <input type="text" id="documento" required>
            <label>Tel√©fono</label>
            <input type="text" id="telefono" required>
            <label>Direcci√≥n</label>
            <input type="text" id="direccion" required>
            <label>Equipo alquilado</label>
            <input type="text" id="equipo" required>
            <label>Fecha de inicio</label>
            <input type="date" id="fechaInicio" required>
            <label>D√≠as de alquiler</label>
            <input type="number" id="dias" required>
            <label>Precio unitario</label>
            <input type="number" id="precioUnitario" required>
            <label>Precio total</label>
            <input type="number" id="precioTotal" readonly>
            <button type="button" class="submit" onclick="registrarAlquiler()">Registrar</button>
          </form>
          <h3>Lista de alquileres</h3>
          <table id="tablaAlquileres">
            <tr><th>Cliente</th><th>Equipo</th><th>Fecha</th><th>D√≠as</th><th>Total ($)</th></tr>
          </table>
        </div>
      `;
      document.getElementById("dias").addEventListener("input", calcularTotal);
      document.getElementById("precioUnitario").addEventListener("input", calcularTotal);
      mostrarAlquileresGuardados();
    }

    function calcularTotal() {
      const dias = parseFloat(document.getElementById("dias").value) || 0;
      const precio = parseFloat(document.getElementById("precioUnitario").value) || 0;
      document.getElementById("precioTotal").value = dias * precio;
    }

    function registrarAlquiler() {
      const cliente = document.getElementById("cliente").value;
      const equipo = document.getElementById("equipo").value;
      const fecha = document.getElementById("fechaInicio").value;
      const dias = document.getElementById("dias").value;
      const total = document.getElementById("precioTotal").value;

      const nuevo = { cliente, equipo, fecha, dias, total };
      const alquileres = JSON.parse(localStorage.getItem("alquileres")) || [];
      alquileres.push(nuevo);
      localStorage.setItem("alquileres", JSON.stringify(alquileres));

      mostrarAlquileres();
    }

    function mostrarAlquileresGuardados() {
      const tabla = document.getElementById("tablaAlquileres");
      const alquileres = JSON.parse(localStorage.getItem("alquileres")) || [];
      alquileres.forEach(a => {
        const fila = tabla.insertRow(-1);
        fila.insertCell(0).textContent = a.cliente;
        fila.insertCell(1).textContent = a.equipo;
        fila.insertCell(2).textContent = a.fecha;
        fila.insertCell(3).textContent = a.dias;
        fila.insertCell(4).textContent = a.total;
      });
    }

    // ----------- PRECIOS -----------
    function mostrarPrecios() {
      const contenido = document.getElementById('contenido');
      contenido.innerHTML = `
        <div class="card">
          <h3>Gesti√≥n de Precios</h3>
          <form id="formPrecio">
            <label>Nombre del producto o equipo</label>
            <input type="text" id="nombreProducto" required>
            <label>Precio unitario ($)</label>
            <input type="number" id="precioProducto" required>
            <button type="button" class="submit" onclick="agregarPrecio()">Agregar</button>
          </form>
          <h3>Lista de productos</h3>
          <table id="tablaPrecios">
            <tr><th>Producto</th><th>Precio ($)</th></tr>
          </table>
        </div>
      `;
      mostrarPreciosGuardados();
    }

    function agregarPrecio() {
      const nombre = document.getElementById("nombreProducto").value;
      const precio = document.getElementById("precioProducto").value;

      const precios = JSON.parse(localStorage.getItem("precios")) || [];
      precios.push({ nombre, precio });
      localStorage.setItem("precios", JSON.stringify(precios));
      mostrarPrecios();
    }

    function mostrarPreciosGuardados() {
      const tabla = document.getElementById("tablaPrecios");
      const precios = JSON.parse(localStorage.getItem("precios")) || [];
      precios.forEach(p => {
        const fila = tabla.insertRow(-1);
        fila.insertCell(0).textContent = p.nombre;
        fila.insertCell(1).textContent = p.precio;
      });
    }

    // ----------- VENTAS -----------
    function mostrarVentas() {
      const precios = JSON.parse(localStorage.getItem("precios")) || [];
      const opciones = precios.map(p => `<option value="${p.precio}">${p.nombre}</option>`).join('');

      const contenido = document.getElementById('contenido');
      contenido.innerHTML = `
        <div class="card">
          <h3>Registro de Ventas</h3>
          <form id="formVenta">
            <label>Nombre del cliente</label>
            <input type="text" id="nombreCliente" required>
            <label>C√©dula</label>
            <input type="text" id="cedulaCliente" required>
            <label>Direcci√≥n</label>
            <input type="text" id="direccionCliente" required>
            <label>Tel√©fono</label>
            <input type="text" id="telefonoCliente" required>
            <label>Producto</label>
            <select id="productoVenta">${opciones}</select>
            <label>Cantidad</label>
            <input type="number" id="cantidadVenta" required>
            <label>Total ($)</label>
            <input type="number" id="totalVenta" readonly>
            <button type="button" class="submit" onclick="registrarVenta()">Registrar venta</button>
          </form>

          <h3>Ventas registradas</h3>
          <table id="tablaVentas">
            <tr><th>Cliente</th><th>Producto</th><th>Cantidad</th><th>Total</th><th>Editar</th></tr>
          </table>
        </div>
      `;
      document.getElementById("cantidadVenta").addEventListener("input", calcularVentaTotal);
      document.getElementById("productoVenta").addEventListener("change", calcularVentaTotal);
      mostrarVentasGuardadas();
    }

    function calcularVentaTotal() {
      const precio = parseFloat(document.getElementById("productoVenta").value) || 0;
      const cantidad = parseFloat(document.getElementById("cantidadVenta").value) || 0;
      document.getElementById("totalVenta").value = precio * cantidad;
    }

    function registrarVenta() {
      const cliente = document.getElementById("nombreCliente").value;
      const producto = document.getElementById("productoVenta").selectedOptions[0].text;
      const cantidad = document.getElementById("cantidadVenta").value;
      const total = document.getElementById("totalVenta").value;

      const ventas = JSON.parse(localStorage.getItem("ventas")) || [];
      ventas.push({ cliente, producto, cantidad, total });
      localStorage.setItem("ventas", JSON.stringify(ventas));

      mostrarVentas();
    }

    function mostrarVentasGuardadas() {
      const tabla = document.getElementById("tablaVentas");
      const ventas = JSON.parse(localStorage.getItem("ventas")) || [];
      ventas.forEach((v, index) => {
        const fila = tabla.insertRow(-1);
        fila.insertCell(0).textContent = v.cliente;
        fila.insertCell(1).textContent = v.producto;
        fila.insertCell(2).textContent = v.cantidad;
        fila.insertCell(3).textContent = v.total;
        const editar = document.createElement("button");
        editar.textContent = "Editar";
        editar.className = "edit-btn";
        editar.onclick = () => editarVenta(index);
        fila.insertCell(4).appendChild(editar);
      });
    }

    function editarVenta(index) {
      const ventas = JSON.parse(localStorage.getItem("ventas"));
      const v = ventas[index];
      alert("Editar cliente: " + v.cliente + " (Pr√≥ximamente editable desde el formulario)");
    }
  </script>
</body>
</html>
